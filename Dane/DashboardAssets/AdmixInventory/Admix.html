<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admixture Inventory Dashboard</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const AdmixReport = () => {
          const [plantData, setPlantData] = useState(null);
          const [incomingOrders, setIncomingOrders] = useState([]);
          const [loading, setLoading] = useState(true);
          const [lastUpdate, setLastUpdate] = useState(null);
          const [showUpdateModal, setShowUpdateModal] = useState(false);
          const [showOrderModal, setShowOrderModal] = useState(false);
          const [selectedPlant, setSelectedPlant] = useState('Brentwood');
          const [formData, setFormData] = useState({
            dv1000: '',
            recover: '',
            isoflex7350: '',
            isoflex8600: '',
            isocure1000: '',
            eclipse4500: '',
            isoxel5400: '',
            vmar3: '',
            regularfiber: '',
            microfiber: '',
            xypex: '',
            expansionjoint: '',
            checkedDrygoods: false,
            userName: ''
          });
          const [orderFormData, setOrderFormData] = useState({
            plantName: 'Brentwood',
            admixType: 'DV1000',
            numberOfGallons: '',
            estimatedDeliveryDate: '',
            notes: '',
            enteredBy: ''
          });
          const [submitting, setSubmitting] = useState(false);

          const SUPABASE_URL = 'https://ntgxamggdtolnlevskjb.supabase.co';
          const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im50Z3hhbWdnZHRvbG5sZXZza2piIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyNTE3NDMsImV4cCI6MjA3NDgyNzc0M30.r18wk6hrD3Qr4PgoQXIqskDsJCKO9jvLQCHQDDtJQvI';

          const fetchData = async () => {
            try {
              const response = await fetch(`${SUPABASE_URL}/rest/v1/admix_inventory?select=*`, {
                headers: {
                  'apikey': SUPABASE_ANON_KEY,
                  'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                }
              });
              
              const data = await response.json();
              
              const transformed = {};
              data.forEach(plant => {
                transformed[plant.plant_name] = {
                  plant: plant.plant_name,
                  inventory: {
                    DV1000: parseFloat(plant.dv1000),
                    RECOVER: parseFloat(plant.recover),
                    ISOFLEX7350: parseFloat(plant.isoflex7350),
                    ISOFLEX8600: parseFloat(plant.isoflex8600),
                    ISOCURE1000: parseFloat(plant.isocure1000),
                    ECLIPSE4500: parseFloat(plant.eclipse4500),
                    ISOXEL5400: parseFloat(plant.isoxel5400),
                    VMAR3: parseFloat(plant.vmar3),
                    REGULARFIBER: parseFloat(plant.regularfiber),
                    MICROFIBER: parseFloat(plant.microfiber),
                    XYPEX: parseFloat(plant.xypex),
                    EXPANSIONJOINT: parseFloat(plant.expansionjoint)
                  },
                  lastDrygoodsCheck: {
                    date: plant.last_drygoods_check_date,
                    time: plant.last_drygoods_check_time,
                    checkedBy: plant.last_drygoods_checked_by
                  },
                  updatedAt: plant.updated_at
                };
              });
              
              setPlantData(transformed);
              setLastUpdate(new Date());
              setLoading(false);
            } catch (error) {
              console.error('Error fetching data:', error);
              setLoading(false);
            }
          };

          const fetchIncomingOrders = async () => {
            try {
              const response = await fetch(
                `${SUPABASE_URL}/rest/v1/admix_incoming_orders?select=*&order=estimated_delivery_date.asc`,
                {
                  headers: {
                    'apikey': SUPABASE_ANON_KEY,
                    'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                  }
                }
              );
              
              const orders = await response.json();
              setIncomingOrders(orders);
            } catch (error) {
              console.error('Error fetching orders:', error);
            }
          };

          const handleSubmitUpdate = async () => {
            if (!formData.dv1000 || !formData.recover || !formData.isoflex7350 || !formData.isoflex8600 || 
                !formData.isocure1000 || !formData.eclipse4500 || !formData.isoxel5400 || !formData.vmar3 ||
                !formData.regularfiber || !formData.microfiber || !formData.xypex || !formData.expansionjoint ||
                !formData.userName) {
              alert('Please fill in all fields');
              return;
            }

            setSubmitting(true);

            try {
              const updateData = {
                dv1000: parseFloat(formData.dv1000),
                recover: parseFloat(formData.recover),
                isoflex7350: parseFloat(formData.isoflex7350),
                isoflex8600: parseFloat(formData.isoflex8600),
                isocure1000: parseFloat(formData.isocure1000),
                eclipse4500: parseFloat(formData.eclipse4500),
                isoxel5400: parseFloat(formData.isoxel5400),
                vmar3: parseFloat(formData.vmar3),
                regularfiber: parseFloat(formData.regularfiber),
                microfiber: parseFloat(formData.microfiber),
                xypex: parseFloat(formData.xypex),
                expansionjoint: parseFloat(formData.expansionjoint)
              };

              if (formData.checkedDrygoods) {
                const now = new Date();
                updateData.last_drygoods_check_date = now.toLocaleDateString('en-US');
                updateData.last_drygoods_check_time = now.toLocaleTimeString('en-US', { hour12: false });
                updateData.last_drygoods_checked_by = formData.userName;
              }

              const response = await fetch(
                `${SUPABASE_URL}/rest/v1/admix_inventory?plant_name=eq.${selectedPlant}`,
                {
                  method: 'PATCH',
                  headers: {
                    'apikey': SUPABASE_ANON_KEY,
                    'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                    'Content-Type': 'application/json',
                    'Prefer': 'return=minimal'
                  },
                  body: JSON.stringify(updateData)
                }
              );

              if (response.ok) {
                alert(`‚úì Successfully updated ${selectedPlant} data by ${formData.userName}`);
                setShowUpdateModal(false);
                setFormData({
                  dv1000: '',
                  recover: '',
                  isoflex7350: '',
                  isoflex8600: '',
                  isocure1000: '',
                  eclipse4500: '',
                  isoxel5400: '',
                  vmar3: '',
                  regularfiber: '',
                  microfiber: '',
                  xypex: '',
                  expansionjoint: '',
                  checkedDrygoods: false,
                  userName: ''
                });
                fetchData();
              } else {
                alert('Error updating data. Please try again.');
              }
            } catch (error) {
              console.error('Error submitting update:', error);
              alert('Error updating data. Please try again.');
            } finally {
              setSubmitting(false);
            }
          };

          const handleSubmitOrder = async () => {
            if (!orderFormData.numberOfGallons || !orderFormData.estimatedDeliveryDate || !orderFormData.enteredBy) {
              alert('Please fill in all required fields');
              return;
            }

            setSubmitting(true);

            try {
              const orderData = {
                plant_name: orderFormData.plantName,
                admix_type: orderFormData.admixType,
                number_of_gallons: parseInt(orderFormData.numberOfGallons),
                estimated_delivery_date: orderFormData.estimatedDeliveryDate,
                order_status: 'pending',
                entered_by: orderFormData.enteredBy,
                notes: orderFormData.notes || null
              };

              const response = await fetch(
                `${SUPABASE_URL}/rest/v1/admix_incoming_orders`,
                {
                  method: 'POST',
                  headers: {
                    'apikey': SUPABASE_ANON_KEY,
                    'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                    'Content-Type': 'application/json',
                    'Prefer': 'return=minimal'
                  },
                  body: JSON.stringify(orderData)
                }
              );

              if (response.ok) {
                alert(`‚úì Order added: ${orderFormData.numberOfGallons} gal of ${orderFormData.admixType} for ${orderFormData.plantName} - entered by ${orderFormData.enteredBy}`);
                setShowOrderModal(false);
                setOrderFormData({
                  plantName: 'Brentwood',
                  admixType: 'DV1000',
                  numberOfGallons: '',
                  estimatedDeliveryDate: '',
                  notes: '',
                  enteredBy: ''
                });
                fetchIncomingOrders();
              } else {
                alert('Error adding order. Please try again.');
              }
            } catch (error) {
              console.error('Error submitting order:', error);
              alert('Error adding order. Please try again.');
            } finally {
              setSubmitting(false);
            }
          };

          const openUpdateModal = (plant) => {
            setSelectedPlant(plant);
            if (plantData && plantData[plant]) {
              setFormData({
                dv1000: plantData[plant].inventory.DV1000.toString(),
                recover: plantData[plant].inventory.RECOVER.toString(),
                isoflex7350: plantData[plant].inventory.ISOFLEX7350.toString(),
                isoflex8600: plantData[plant].inventory.ISOFLEX8600.toString(),
                isocure1000: plantData[plant].inventory.ISOCURE1000.toString(),
                eclipse4500: plantData[plant].inventory.ECLIPSE4500.toString(),
                isoxel5400: plantData[plant].inventory.ISOXEL5400.toString(),
                vmar3: plantData[plant].inventory.VMAR3.toString(),
                regularfiber: plantData[plant].inventory.REGULARFIBER.toString(),
                microfiber: plantData[plant].inventory.MICROFIBER.toString(),
                xypex: plantData[plant].inventory.XYPEX.toString(),
                expansionjoint: plantData[plant].inventory.EXPANSIONJOINT.toString(),
                checkedDrygoods: false,
                userName: ''
              });
            }
            setShowUpdateModal(true);
          };

          useEffect(() => {
            fetchData();
            fetchIncomingOrders();
            const interval = setInterval(() => {
              fetchData();
              fetchIncomingOrders();
            }, 90000);
            return () => clearInterval(interval);
          }, []);

          const Silo = ({ color, code, amount, position }) => {
            const colorMap = {
              DV1000: "from-green-600 to-green-700",
              RECOVER: "from-emerald-600 to-emerald-800",
              ISOFLEX7350: "from-blue-400 to-blue-500",
              ISOFLEX8600: "from-yellow-600 to-yellow-700",
              ISOCURE1000: "from-gray-600 to-gray-800",
              ECLIPSE4500: "from-red-600 to-red-700",
              ISOXEL5400: "from-orange-400 to-orange-600",
              VMAR3: "from-purple-400 to-purple-500"
            };

            const maxCapacities = {
              DV1000: 500,
              RECOVER: 500,
              VMAR3: 500,
              ISOCURE1000: 500,
              ISOFLEX7350: 4000,
              ISOXEL5400: 4000,
              ISOFLEX8600: 2000,
              ECLIPSE4500: 2000
            };

            const maxCapacity = maxCapacities[code] || 500;
            const fillPercentage = (amount / maxCapacity) * 100;
            const fillHeight = Math.min(fillPercentage, 100);
            
            const isLow = fillPercentage < 20;
            const isHigh = fillPercentage > 90;

            return (
              <div className="flex flex-col items-center flex-shrink-0">
                <div className="relative w-24 h-40 bg-gray-300 rounded-lg shadow-lg border-4 border-gray-700 overflow-hidden">
                  <div 
                    className={`absolute bottom-0 left-0 right-0 bg-gradient-to-b ${colorMap[code]} transition-all duration-500`}
                    style={{ height: `${fillHeight}%` }}
                  ></div>
                  {isLow && (
                    <div className="absolute top-1 right-1 animate-pulse">
                      <span className="text-red-500 text-xl">‚ö†Ô∏è</span>
                    </div>
                  )}
                  {isHigh && (
                    <div className="absolute top-1 right-1 animate-pulse">
                      <span className="text-yellow-500 text-xl">‚ö†Ô∏è</span>
                    </div>
                  )}
                  <div className="relative h-full flex flex-col items-center justify-between p-1 z-10">
                    <div className={`bg-white bg-opacity-90 rounded px-1 py-0.5 text-xs font-bold mt-1 ${isLow ? 'text-red-600' : isHigh ? 'text-yellow-600' : 'text-gray-800'}`}>
                      {amount.toFixed(1)}
                      <div className="text-xs text-gray-600">{fillPercentage.toFixed(0)}%</div>
                    </div>
                    <div className="text-white font-bold text-xs mb-1 drop-shadow-lg text-center">
                      {code}
                    </div>
                  </div>
                </div>
              </div>
            );
          };

          const PlantSection = ({ data }) => {
            return (
              <div className="bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl p-6 shadow-2xl border-2 border-gray-300">
                <div className="mb-4 bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-lg shadow-lg flex justify-between items-center">
                  <h2 className="text-3xl font-bold">{data.plant} Plant</h2>
                  <button
                    onClick={() => openUpdateModal(data.plant)}
                    className="bg-white text-blue-700 px-4 py-2 rounded-lg font-semibold hover:bg-blue-50 transition-colors text-sm"
                  >
                    Update Data
                  </button>
                </div>
                
                <div className="flex flex-wrap justify-center items-end mb-4 bg-white bg-opacity-50 rounded-lg p-4 gap-4">
                  <Silo color="green" code="DV1000" amount={data.inventory.DV1000} position={1} />
                  <Silo color="darkgreen" code="RECOVER" amount={data.inventory.RECOVER} position={2} />
                  <Silo color="blue" code="ISOFLEX7350" amount={data.inventory.ISOFLEX7350} position={3} />
                  <Silo color="yellow" code="ISOFLEX8600" amount={data.inventory.ISOFLEX8600} position={4} />
                  <Silo color="gray" code="ISOCURE1000" amount={data.inventory.ISOCURE1000} position={5} />
                  <Silo color="red" code="ECLIPSE4500" amount={data.inventory.ECLIPSE4500} position={6} />
                  <Silo color="orange" code="ISOXEL5400" amount={data.inventory.ISOXEL5400} position={7} />
                  <Silo color="purple" code="VMAR3" amount={data.inventory.VMAR3} position={8} />
                </div>

                <div className="bg-white bg-opacity-70 rounded-lg p-4 mb-4 shadow-md">
                  <h3 className="text-lg font-bold text-gray-800 mb-3 flex items-center gap-2">
                    üì¶ Dry Goods Inventory
                  </h3>
                  <div className="grid grid-cols-2 gap-3">
                    <div className="flex items-center gap-2 bg-gray-50 p-2 rounded">
                      <span className="text-2xl">üì¶</span>
                      <div>
                        <div className="text-sm font-semibold text-gray-700">REGULARFIBER</div>
                        <div className="text-lg font-bold text-gray-900">{data.inventory.REGULARFIBER.toFixed(1)} bags</div>
                      </div>
                    </div>
                    <div className="flex items-center gap-2 bg-gray-50 p-2 rounded">
                      <span className="text-2xl">üì¶</span>
                      <div>
                        <div className="text-sm font-semibold text-gray-700">MICROFIBER</div>
                        <div className="text-lg font-bold text-gray-900">{data.inventory.MICROFIBER.toFixed(1)} bags</div>
                      </div>
                    </div>
                    <div className="flex items-center gap-2 bg-gray-50 p-2 rounded">
                      <span className="text-2xl">üì¶</span>
                      <div>
                        <div className="text-sm font-semibold text-gray-700">XYPEX</div>
                        <div className="text-lg font-bold text-gray-900">{data.inventory.XYPEX.toFixed(1)} bags (12lb)</div>
                      </div>
                    </div>
                    <div className="flex items-center gap-2 bg-gray-50 p-2 rounded">
                      <span className="text-2xl">üì¶</span>
                      <div>
                        <div className="text-sm font-semibold text-gray-700">EXPANSIONJOINT</div>
                        <div className="text-lg font-bold text-gray-900">{data.inventory.EXPANSIONJOINT.toFixed(1)} bundles</div>
                      </div>
                    </div>
                  </div>
                </div>

                {data.lastDrygoodsCheck.date && (
                  <div className="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg p-4 shadow-md">
                    <div className="flex items-center justify-between">
                      <div className="flex items-center gap-3">
                        <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <div>
                          <div className="text-sm font-semibold opacity-90">Last Dry Goods Check</div>
                          <div className="text-xl font-bold">{data.lastDrygoodsCheck.date} at {data.lastDrygoodsCheck.time}</div>
                          {data.lastDrygoodsCheck.checkedBy && (
                            <div className="text-sm opacity-90 mt-1">Checked by {data.lastDrygoodsCheck.checkedBy}</div>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            );
          };

          if (loading) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center">
                <div className="text-white text-2xl">Loading inventory data...</div>
              </div>
            );
          }

          if (!plantData) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center">
                <div className="text-white text-2xl">No data available</div>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-800 to-slate-900 p-8">
              <div className="max-w-7xl mx-auto">
                <div className="mb-8 text-center">
                  <h1 className="text-5xl font-bold text-white mb-2 drop-shadow-lg">
                    Admixture Daily Report
                  </h1>
                  <div className="text-gray-300 text-lg">
                    Admix Inventory Status - Live Feed
                  </div>
                  {lastUpdate && (
                    <div className="text-gray-400 text-sm mt-2">
                      Last Updated: {lastUpdate.toLocaleTimeString()}
                      <span className="ml-2 inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    </div>
                  )}
                </div>

                <div className="grid grid-cols-1 xl:grid-cols-2 gap-8">
                  {plantData.Brentwood && <PlantSection data={plantData.Brentwood} />}
                  {plantData.Pittsburg && <PlantSection data={plantData.Pittsburg} />}
                </div>

                {incomingOrders.length > 0 && (
                  <div className="mt-8 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl p-6 shadow-xl border-2 border-purple-300">
                    <h3 className="text-2xl font-bold text-purple-900 mb-4 flex items-center gap-2">
                      üì¶ Incoming Orders ({incomingOrders.length})
                    </h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                      {incomingOrders.map((order) => (
                        <div key={order.id} className="bg-white rounded-lg p-4 shadow-md">
                          <div className="flex justify-between items-start mb-2">
                            <span className="text-lg font-bold text-gray-800">{order.admix_type}</span>
                            <span className="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full font-semibold">
                              {order.plant_name}
                            </span>
                          </div>
                          <div className="text-sm text-gray-600 mb-1">
                            <strong>{order.number_of_gallons.toLocaleString()}</strong> gallons
                          </div>
                          <div className="text-sm text-gray-600 mb-2">
                            ETA: <strong>{new Date(order.estimated_delivery_date).toLocaleDateString()}</strong>
                          </div>
                          {order.notes && (
                            <div className="text-xs text-gray-500 mb-2 italic">
                              {order.notes}
                            </div>
                          )}
                          <div className="text-xs text-gray-400 border-t pt-2">
                            Added by {order.entered_by}
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                <div className="mt-8 flex justify-center">
                  <button
                    onClick={() => setShowOrderModal(true)}
                    className="bg-gradient-to-r from-purple-600 to-purple-800 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-purple-700 hover:to-purple-900 transition-all shadow-lg flex items-center gap-3"
                  >
                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                    </svg>
                    Add Incoming Order
                  </button>
                </div>

                <div className="mt-8 bg-gray-800 bg-opacity-50 rounded-lg p-4 text-center">
                  <div className="text-gray-400 text-sm">
                    All inventory levels shown in gallons (gal) | Max Capacity: DV1000/RECOVER/VMAR3/ISOCURE1000 = 500 gal, ISOFLEX7350/ISOXEL5400 = 4000 gal, ISOFLEX8600/ECLIPSE4500 = 2000 gal
                    <br />
                    <span className="text-xs">Dashboard auto-refreshes every 90 seconds</span>
                  </div>
                </div>
              </div>

              {showUpdateModal && (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                  <div className="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div className="bg-gradient-to-r from-blue-600 to-blue-800 text-white p-6 rounded-t-xl">
                      <h2 className="text-2xl font-bold">Update {selectedPlant} Data</h2>
                    </div>
                    
                    <div className="p-6">
                      <div className="grid grid-cols-2 gap-4 mb-6">
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            DV1000 (gal)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.dv1000}
                            onChange={(e) => setFormData({...formData, dv1000: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            RECOVER (gal)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.recover}
                            onChange={(e) => setFormData({...formData, recover: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            ISOFLEX7350 (gal)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.isoflex7350}
                            onChange={(e) => setFormData({...formData, isoflex7350: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            ISOFLEX8600 (gal)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.isoflex8600}
                            onChange={(e) => setFormData({...formData, isoflex8600: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            ISOCURE1000 (gal)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.isocure1000}
                            onChange={(e) => setFormData({...formData, isocure1000: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            ECLIPSE4500 (gal)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.eclipse4500}
                            onChange={(e) => setFormData({...formData, eclipse4500: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            ISOXEL5400 (gal)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.isoxel5400}
                            onChange={(e) => setFormData({...formData, isoxel5400: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            VMAR3 (gal)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.vmar3}
                            onChange={(e) => setFormData({...formData, vmar3: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            REGULARFIBER (bags)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.regularfiber}
                            onChange={(e) => setFormData({...formData, regularfiber: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            MICROFIBER (bags)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.microfiber}
                            onChange={(e) => setFormData({...formData, microfiber: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            XYPEX (12lb bags)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.xypex}
                            onChange={(e) => setFormData({...formData, xypex: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            EXPANSIONJOINT (bundles)
                          </label>
                          <input
                            type="number"
                            step="0.1"
                            value={formData.expansionjoint}
                            onChange={(e) => setFormData({...formData, expansionjoint: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div className="col-span-2">
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            Your Name
                          </label>
                          <input
                            type="text"
                            value={formData.userName}
                            onChange={(e) => setFormData({...formData, userName: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            placeholder="Enter your name"
                          />
                        </div>
                      </div>

                      <div className="mb-6">
                        <label className="flex items-center space-x-3 cursor-pointer">
                          <input
                            type="checkbox"
                            checked={formData.checkedDrygoods}
                            onChange={(e) => setFormData({...formData, checkedDrygoods: e.target.checked})}
                            className="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"
                          />
                          <span className="text-sm font-semibold text-gray-700">
                            Checked inventory on Dry Goods (REGULARFIBER, MICROFIBER, XYPEX, EXPANSIONJOINT)
                          </span>
                        </label>
                      </div>

                      <div className="flex gap-4">
                        <button
                          onClick={handleSubmitUpdate}
                          disabled={submitting}
                          className="flex-1 bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-blue-900 transition-all disabled:opacity-50"
                        >
                          {submitting ? 'Updating...' : 'Submit Update'}
                        </button>
                        <button
                          onClick={() => setShowUpdateModal(false)}
                          className="flex-1 bg-gray-300 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:bg-gray-400 transition-colors"
                        >
                          Cancel
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {showOrderModal && (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                  <div className="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div className="bg-gradient-to-r from-purple-600 to-purple-800 text-white p-6 rounded-t-xl">
                      <h2 className="text-2xl font-bold">Add Incoming Order</h2>
                    </div>
                    
                    <div className="p-6">
                      <div className="grid grid-cols-2 gap-4 mb-6">
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            Plant Location *
                          </label>
                          <select
                            value={orderFormData.plantName}
                            onChange={(e) => setOrderFormData({...orderFormData, plantName: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                          >
                            <option value="Brentwood">Brentwood</option>
                            <option value="Pittsburg">Pittsburg</option>
                          </select>
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            Admix Type *
                          </label>
                          <select
                            value={orderFormData.admixType}
                            onChange={(e) => setOrderFormData({...orderFormData, admixType: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                          >
                            <option value="DV1000">DV1000</option>
                            <option value="RECOVER">RECOVER</option>
                            <option value="ISOFLEX7350">ISOFLEX7350</option>
                            <option value="ISOFLEX8600">ISOFLEX8600</option>
                            <option value="ISOCURE1000">ISOCURE1000</option>
                            <option value="ECLIPSE4500">ECLIPSE4500</option>
                            <option value="ISOXEL5400">ISOXEL5400</option>
                            <option value="VMAR3">VMAR3</option>
                          </select>
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            Number of Gallons *
                          </label>
                          <input
                            type="number"
                            min="1"
                            value={orderFormData.numberOfGallons}
                            onChange={(e) => setOrderFormData({...orderFormData, numberOfGallons: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="Enter number of gallons"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            Estimated Delivery Date *
                          </label>
                          <input
                            type="date"
                            value={orderFormData.estimatedDeliveryDate}
                            onChange={(e) => setOrderFormData({...orderFormData, estimatedDeliveryDate: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div className="col-span-2">
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            Your Name *
                          </label>
                          <input
                            type="text"
                            value={orderFormData.enteredBy}
                            onChange={(e) => setOrderFormData({...orderFormData, enteredBy: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="Enter your name"
                          />
                        </div>
                        
                        <div className="col-span-2">
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            Notes (Optional)
                          </label>
                          <textarea
                            value={orderFormData.notes}
                            onChange={(e) => setOrderFormData({...orderFormData, notes: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            placeholder="Any additional info..."
                            rows="3"
                          />
                        </div>
                      </div>

                      <div className="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6">
                        <div className="text-xs text-purple-800 font-semibold mb-2">Tank Capacities:</div>
                        <div className="text-xs text-purple-700">
                          ‚Ä¢ DV1000/RECOVER/VMAR3/ISOCURE1000: <strong>500 gal per tank</strong><br />
                          ‚Ä¢ ISOFLEX7350/ISOXEL5400: <strong>4,000 gal per tank</strong><br />
                          ‚Ä¢ ISOFLEX8600/ECLIPSE4500: <strong>2,000 gal per tank</strong>
                        </div>
                      </div>

                      <div className="flex gap-4">
                        <button
                          onClick={handleSubmitOrder}
                          disabled={submitting}
                          className="flex-1 bg-gradient-to-r from-purple-600 to-purple-800 text-white py-3 px-6 rounded-lg font-semibold hover:from-purple-700 hover:to-purple-900 transition-all disabled:opacity-50"
                        >
                          {submitting ? 'Adding Order...' : 'Add Order'}
                        </button>
                        <button
                          onClick={() => setShowOrderModal(false)}
                          className="flex-1 bg-gray-300 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:bg-gray-400 transition-colors"
                        >
                          Cancel
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              )}
            </div>
          );
        };

        ReactDOM.render(<AdmixReport />, document.getElementById('root'));
    </script>
</body>
</html>